--회원 테이블 

create table allmember(
	id 			varchar2(20) primary key,	
	password 	varchar2(30) not null,	
	nickname	varchar2(30) not null,
	name 		varchar2(30) not null,		
	email1 		varchar2(30) not null,
	email2 		varchar2(30) not null,				
	hp1 		varchar2(4) not null,		
  	hp2 		varchar2(8) not null,
  	hp3 		varchar2(8) not null,
	postnumber	varchar2(20),			--우편번호
	address1 	varchar2(70),			
	address2 	varchar2(70),
	year		varchar2(10),					--생년월일
	month		varchar2(10),
	day			varchar2(10),
	gender 		varchar2(10),
	img			varchar2(30),
	joindate 	date default sysdate	--가입날짜
) ;

create sequence recipereq start with 1 increment by 1 nocache ;

drop table recipe cascade constraints;
create table recipe(
	recnum		number primary key,	
	writer		varchar2(30) references allmember(id) on delete set null,
	psubject	varchar2(60) default '제목없음',
	intro		varchar2(2000),		--소개
	mainimage	varchar2(40),		--대문이미지
	kind 		number,				--종류	
	situation	number,				--상황
	method		number,				--방법
	ingredient	number,				--재료
	person		varchar2(20),		--인원수
	time		varchar2(20),		--요리시간
	movieurl	varchar2(60),		--동영상 링크주소
	scrap		number default 0,	--스크랩수
	image1		varchar2(40),		
	image2		varchar2(40),		
	image3		varchar2(40),		
	image4		varchar2(40),		
	inputdate	date default sysdate
);


insert into recipe(recnum,writer,psubject,intro,mainimage) values(recipereq.nextval,'admin','제목입니다','소개글입니다','코알라.jpg'); 

create sequence ingredientreq start with 1 increment by 1 nocache ;

drop table ingredient cascade constraints;
create table ingredient(
	inum	number primary key,	
	recnum	number references recipe(recnum) on delete cascade,
	fname	varchar2(30) not null,
	iname	varchar2(30) not null,
	mass	varchar2(30) not null
);

create sequence procedurereq start with 1 increment by 1 nocache ;

drop table procedure cascade constraints;
create table procedure(
	pronum		number primary key,	
	recnum		number references recipe(recnum) on delete cascade,
	procontent	varchar2(2000),
	proimage	varchar2(30),
	prostep		number
);


create sequence talkseq start with 1 increment by 1 nocache ;

create table talk(
	tnum		number primary key,
	tid 		varchar2(20) not null,
	tcontent	varchar2(2000),
	timage		varchar2(30),
	inputdate	date default sysdate
);


create sequence cookinfoseq start with 1 increment by 1 nocache ;

create table cookinfo(
	infonum			number primary key,	
	infosubject		varchar2(60),
	infointro		varchar2(2000),
	infoimage		varchar2(30),
	infomovie		varchar2(60),
	indate		date default sysdate
);


create sequence productseq start with 1 increment by 1 nocache ;

create table product(
	pnum			number primary key,	
	pname			varchar2(30) not null,
	capacity		varchar2(20),
	price			number,
	stock			number,
	company			varchar2(30),
	origin			varchar2(30),
	pimage			varchar2(30),
	inputdate		date default sysdate
);





create sequence allorderseq start with 1 increment by 1 nocache ;
create table allorder(
  onum 		number primary key,
  mid		varchar2(20) not null,
  pnum 		number references product(pnum) on delete set null,
  qty 		number,
  price		number,
  amount	number,
  orderdate	date default sysdate
); 



create sequence replyreq start with 1 increment by 1 nocache ;

create table reply(
	renum		number primary key,
	cate		varchar2(20) not null,
	canum		number not null,
	rewriter	varchar2(30) not null,
	content		varchar2(2000),
	ref 		number not null,	
	restep 		number not null,
	relevel 	number not null,
	inputdate	date default sysdate
);


create sequence opinionreq start with 1 increment by 1 nocache ;

create table opinion(
	opnum	number primary key,
	category	varchar2(30) not null,
	opid		varchar2(30) not null,
	opsubject	varchar2(60) not null,
	opcontent	varchar2(2000) not null,
	currdate date default sysdate
);


